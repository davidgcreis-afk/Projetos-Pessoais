from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.textinput import TextInput
import sqlite3

class SimpleApp(App):
    # Simple user database (for demonstration purposes) - not secure
    db = sqlite3.connect(':memory:')
    cursor = db.cursor()
    cursor.execute('CREATE TABLE IF NOT EXISTS users (username TEXT, password TEXT)')
    cursor.executemany('INSERT INTO users VALUES (?, ?)', [("user1", "password1"), ("user2", "password2")])
    db.commit()
    def authenticate(self, username, password):
        self.cursor.execute('SELECT * FROM users WHERE username=? AND password=?', (username, password))
        return self.cursor.fetchone() is not None


    def build(self):
        layout = BoxLayout(orientation='vertical', padding=20, spacing=10)
        self.label = Label(text="Hello, World!", font_size=32)
        layout.add_widget(self.label)
        layout.add_widget(Label(text="Enter your username:", font_size=18))
        self.username_input = TextInput(hint_text="Username", size_hint=(1, 0.4))
        layout.add_widget(self.username_input)
        layout.add_widget(Label(text="Enter your password:", font_size=18))
        self.password_input = TextInput(hint_text="Password", size_hint=(1, 0.4), password=True)
        layout.add_widget(self.password_input)
        login_btn = Button(text="Login", size_hint=(1, 0.3))
        login_btn.bind(on_press=self.login)
        layout.add_widget(login_btn)
        layout.add_widget(Label(text="Welcome to my Kivy App!", font_size=24))
        layout.add_widget(Label(text="This is a simple Kivy app.", font_size=20))
        return layout

    def login(self, instance):
        username = self.username_input.text
        password = self.password_input.text
        if self.authenticate(username, password):
            self.label.text = "Login successful!"
        else:
            self.label.text = "Login failed!"

if __name__ == '__main__':
    SimpleApp().run()